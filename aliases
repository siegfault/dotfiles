# generic
alias srsly='sudo'
alias boom='git reset --hard'
alias rg='rg --hidden'

# default overrides
alias fd=fdfind
alias ll='exa -la'
alias ls='exa'

# git aliases
alias g='git'
alias gs='git status'
alias gd='git diff'
alias gp='git pull'
alias staged='git diff --staged'
alias stat='git diff --stat'

# tmux
alias tattach='tmux attach-session -t'
alias tlist='tmux list-sessions'
alias mux='tmuxinator-fzf-start.sh'

# rails aliases
alias mig='bundle exec rake db:migrate'
alias spec='RAILS_ENV=test bundle exec rspec'
alias setup='bundle exec rake db:drop && bundle exec rake db:setup && bundle exec rake db:migrate && bundle exec rake db:test:prepare'
alias be='bundle exec'

# rubocop
alias rc='bundle exec rubocop --format fuubar'
alias rcac='bundle exec rubocop --auto-correct --format fuubar'
alias rcagc='bundle exec rubocop --auto-gen-config --format fuubar'

function gclone () {
  read -p "Repo owner: " owner
  read -p "Repo name: " name
  read -p "Directory [~/code/${name}]: " directory

  tmux_name=$(tmuxinator list -n | tail -n+2 | fzf --prompt="Tmux config: ")
  tmux_source=~/.tmuxinator/${tmux_name}.yml
  tmux_destination=~/.tmuxinator/${name}.yml

  git clone git@github.com:${owner}/${name}.git ${directory:-~/code/${name}}

  cp $tmux_source $tmux_destination
  sed -in "s/NAME/${name}/g" $tmux_destination

  if grep -q 'UNIQUE_PORT_NUMBER' $tmux_source ; then
    echo "Ports already used: $(awk -F ':' '/127.0.0.1:[0-9]/ {print $3}' ~/.tmuxinator/* | sort | paste -sd ', ' -)"
    read -p "Port number: " port
    sed -in "s/UNIQUE_PORT_NUMBER/${port}/g" $tmux_destination
  fi
}
